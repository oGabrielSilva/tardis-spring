{
  "version": 3,
  "sources": ["../../../typescript/api/JsonRestApi.ts", "../../../typescript/data/validation/UserValidation.ts", "../../../typescript/tools/AnimationTool.ts", "../../../typescript/utils/generateHTML.ts", "../../../typescript/tools/ScreenProgressTool.ts", "../../../typescript/tools/ToasterTool.ts", "../../../typescript/manager/authenticationManager.ts", "../../../typescript/tools/ImageTool.ts", "../../../typescript/manager/profileManager.ts", "../../../typescript/data/validation/QuizValidation.ts", "../../../typescript/manager/quizCreationManager.ts", "../../../typescript/utils/forbidden.ts", "../../../typescript/manager/quizEditManager.ts", "../../../typescript/main.ts"],
  "sourcesContent": ["import type { ExceptionDto } from '@App/data/dto/ExceptionDto';\r\n\r\nexport class JsonRestApi {\r\n  private static rest: JsonRestApi;\r\n\r\n  private constructor() {}\r\n\r\n  public async GET<T = null>(path: string, headers = new Headers()) {\r\n    const response = await fetch(this.normalizePath(path), this.optionsWithoutBody(headers, 'GET'));\r\n    const json = await this.getJson<T>(response);\r\n    return { json, response, status: response.status };\r\n  }\r\n\r\n  public async POST<T = null>(path: string, body: string, headers = new Headers()) {\r\n    const response = await fetch(this.normalizePath(path), this.options(body, headers, 'POST'));\r\n    const json = await this.getJson<T>(response);\r\n    return { json, response, status: response.status };\r\n  }\r\n\r\n  public async PUT<T = null>(path: string, body: string, headers = new Headers()) {\r\n    const response = await fetch(this.normalizePath(path), this.options(body, headers, 'PUT'));\r\n    const json = await this.getJson<T>(response);\r\n    return { json, response, status: response.status };\r\n  }\r\n\r\n  public async PATCH<T = null>(path: string, body: string, headers = new Headers()) {\r\n    const response = await fetch(this.normalizePath(path), this.options(body, headers, 'PATCH'));\r\n    const json = await this.getJson<T>(response);\r\n    return { json, response, status: response.status };\r\n  }\r\n\r\n  public async DELETE(path: string, headers = new Headers()) {\r\n    const response = await fetch(\r\n      this.normalizePath(path),\r\n      this.optionsWithoutBody(headers, 'DELETE'),\r\n    );\r\n    if (!response.ok) {\r\n      const json = await this.getJson<ExceptionDto>(response);\r\n      return { response, status: response.status, json };\r\n    }\r\n    return { response, status: response.status };\r\n  }\r\n\r\n  private normalizePath(path: string) {\r\n    return path.startsWith('/api') ? path : '/api' + (path.startsWith('/') ? path : path + '/');\r\n  }\r\n\r\n  private configureHeaders(headers: Headers) {\r\n    headers.set('Content-Type', 'application/json');\r\n    return headers;\r\n  }\r\n\r\n  private options(\r\n    body: string,\r\n    headers: Headers,\r\n    method: 'GET' | 'POST' | 'PATCH' | 'PUT' | 'DELETE' = 'GET',\r\n  ): RequestInit {\r\n    return { body, headers: this.configureHeaders(headers), credentials: 'include', method };\r\n  }\r\n\r\n  private optionsWithoutBody(headers: Headers, method: 'GET' | 'DELETE' = 'GET'): RequestInit {\r\n    return { headers: this.configureHeaders(headers), credentials: 'include', method };\r\n  }\r\n\r\n  private getJson<T>(f: Response) {\r\n    if (f.status !== 204 && f.status !== 205) return f.json() as Promise<T>;\r\n    return null;\r\n  }\r\n\r\n  public static get() {\r\n    if (!JsonRestApi.rest) {\r\n      JsonRestApi.rest = new JsonRestApi();\r\n    }\r\n    return JsonRestApi.rest;\r\n  }\r\n}\r\n", "export class UserValidation {\r\n  private readonly emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\r\n  private readonly usernameRegex = /[^a-zA-Z0-9\\-_.]/g;\r\n\r\n  public isEmailValid(email: string) {\r\n    return typeof email === 'string' && this.emailRegex.test(email);\r\n  }\r\n\r\n  public isPasswordValid(password: string) {\r\n    return typeof password === 'string' && password.length >= 8;\r\n  }\r\n\r\n  public isNameValid(name: string) {\r\n    return typeof name === 'string' && name.length >= 2;\r\n  }\r\n\r\n  public isUsernameValid(username: string) {\r\n    return typeof username === 'string' && username.length >= 1;\r\n  }\r\n\r\n  public normalizeUsername(username: string) {\r\n    return username.trim().replace(this.usernameRegex, '');\r\n  }\r\n}\r\n", "export class AnimationTool {\r\n  private static anim: AnimationTool;\r\n\r\n  private readonly shakeClass = 'animated-by-shake';\r\n\r\n  private constructor() {}\r\n\r\n  public scaleIn(element: HTMLElement, onComplete?: () => void) {\r\n    element.style.scale = '1.1';\r\n    setTimeout(() => {\r\n      element.style.scale = '';\r\n      if (onComplete) setTimeout(() => onComplete(), 400);\r\n    }, 400);\r\n  }\r\n\r\n  public scaleOut(element: HTMLElement, onComplete?: () => void) {\r\n    element.style.scale = '1.1';\r\n    setTimeout(() => {\r\n      element.style.scale = '0';\r\n      if (onComplete) setTimeout(() => onComplete(), 400);\r\n    }, 100);\r\n  }\r\n\r\n  public shake(element: HTMLElement, getFocus = true, timer = 400) {\r\n    if (element.classList.contains(this.shakeClass)) {\r\n      element.classList.remove(this.shakeClass);\r\n    }\r\n    if (getFocus) element.focus();\r\n    setTimeout(() => {\r\n      element.classList.add(this.shakeClass);\r\n      setTimeout(() => element.classList.remove(this.shakeClass), timer);\r\n    }, 100);\r\n  }\r\n\r\n  public static get() {\r\n    if (!AnimationTool.anim) {\r\n      AnimationTool.anim = new AnimationTool();\r\n    }\r\n    return AnimationTool.anim;\r\n  }\r\n}\r\n", "interface Attr {\r\n  key: string;\r\n  value: string;\r\n}\r\n\r\ninterface HTML {\r\n  htmlType: string;\r\n  attributes?: Array<Attr>;\r\n  children?: Array<HTML>;\r\n  value?: string;\r\n  // eslint-disable-next-line no-unused-vars\r\n  onClick?: (target: HTMLElement) => void;\r\n}\r\n\r\nfunction generate({ htmlType, attributes, value, onClick, children }: HTML) {\r\n  const html = document.createElement(htmlType);\r\n  if (attributes) attributes.forEach((attr) => html.setAttribute(attr.key, attr.value));\r\n  if (onClick) html.onclick = () => onClick(html);\r\n  if (children) {\r\n    children.forEach((child) => {\r\n      const c = generate(child);\r\n      html.appendChild(c);\r\n    });\r\n  }\r\n  if (value) html.textContent = value;\r\n  return html;\r\n}\r\n\r\nexport function generateHTML<T>({ attributes, value, htmlType, onClick, children }: HTML) {\r\n  const html = generate({ htmlType, attributes, onClick });\r\n  if (children) {\r\n    children.forEach((child) => {\r\n      const c = generate(child);\r\n      html.appendChild(c);\r\n    });\r\n  }\r\n  if (value) html.textContent = value;\r\n  return html as T;\r\n}\r\n", "import { generateHTML } from '@App/utils/generateHTML';\r\n\r\nexport class ScreenProgressTool {\r\n  private static tool: ScreenProgressTool;\r\n\r\n  private readonly screenProgressID = 'progress-view-container';\r\n  private readonly barClassName = 'bar';\r\n  private readonly bar2ClassName = 'bar2';\r\n  private readonly view = generateHTML<HTMLDivElement>({\r\n    htmlType: 'div',\r\n    attributes: [{ key: 'id', value: this.screenProgressID }],\r\n    children: [\r\n      { htmlType: 'div', attributes: [{ key: 'class', value: this.barClassName }] },\r\n      { htmlType: 'div', attributes: [{ key: 'class', value: this.bar2ClassName }] },\r\n    ],\r\n  });\r\n\r\n  private isVisible = false;\r\n\r\n  private constructor() {}\r\n\r\n  public show() {\r\n    if (this.isVisible) return;\r\n    this.isVisible = true;\r\n    document.body.appendChild(this.view);\r\n  }\r\n\r\n  public hide() {\r\n    this.isVisible = false;\r\n    this.view.remove();\r\n  }\r\n\r\n  public onScreen() {\r\n    return this.isVisible;\r\n  }\r\n\r\n  public static get() {\r\n    if (!ScreenProgressTool.tool) {\r\n      ScreenProgressTool.tool = new ScreenProgressTool();\r\n    }\r\n    return ScreenProgressTool.tool;\r\n  }\r\n}\r\n", "import { generateHTML } from '@App/utils/generateHTML';\r\nimport { AnimationTool } from './AnimationTool';\r\n\r\ninterface Theme {\r\n  icon: string;\r\n  backdrop: string;\r\n  color: string;\r\n}\r\n\r\nexport class ToasterTool {\r\n  private static tool: ToasterTool;\r\n\r\n  private readonly anim;\r\n  private readonly events: Array<number> = [];\r\n  private readonly toasterID = 'toaster';\r\n  private toaster: HTMLDivElement | null = null;\r\n  private toasterText: HTMLSpanElement | null = null;\r\n  private toasterIcon: HTMLElement | null = null;\r\n  private toasterProgress: HTMLElement | null = null;\r\n  private readonly styleWithAnim = document.createElement('style');\r\n  private toasterInScreen = false;\r\n\r\n  private readonly animationClass = 'ex-anim-progress-bar';\r\n  private readonly animationKeyframePropertyName = 'kf-anim-progress-bar';\r\n  private readonly themes = {\r\n    info: {\r\n      icon: 'bi bi-info-circle',\r\n      backdrop: 'var(--primary)',\r\n      color: 'var(--text-on-primary)',\r\n    } as Theme,\r\n    danger: {\r\n      icon: 'bi bi-exclamation-diamond',\r\n      backdrop: 'var(--danger)',\r\n      color: 'var(--text-on-danger)',\r\n    } as Theme,\r\n    alert: {\r\n      icon: 'bi bi-question-diamond',\r\n      backdrop: 'var(--alert)',\r\n      color: 'var(--text-on-alert)',\r\n    } as Theme,\r\n    success: {\r\n      icon: 'bi bi-check2-circle',\r\n      backdrop: 'var(--success)',\r\n      color: 'var(--text-on-success)',\r\n    } as Theme,\r\n  };\r\n\r\n  private afterFunction?: () => void = void 0;\r\n\r\n  private constructor(anim: AnimationTool) {\r\n    this.anim = anim;\r\n  }\r\n\r\n  private generate() {\r\n    this.toaster = generateHTML({\r\n      htmlType: 'div',\r\n      attributes: [{ key: 'id', value: this.toasterID }],\r\n      children: [\r\n        {\r\n          htmlType: 'div',\r\n          attributes: [{ key: 'class', value: 'content' }],\r\n          children: [\r\n            {\r\n              htmlType: 'i',\r\n              attributes: [{ key: 'class', value: 'bi bi-info-circle' }],\r\n            },\r\n            { htmlType: 'span' },\r\n          ],\r\n        },\r\n        {\r\n          htmlType: 'div',\r\n          attributes: [{ key: 'class', value: 'progress ' + this.animationClass }],\r\n        },\r\n      ],\r\n    });\r\n    this.toasterText = this.toaster!.querySelector('span');\r\n    this.toasterIcon = this.toaster!.querySelector('i');\r\n    this.toasterProgress = this.toaster!.querySelector('.progress');\r\n    document.head.appendChild(this.styleWithAnim);\r\n    this.toaster!.onclick = () => {\r\n      this.hide();\r\n    };\r\n  }\r\n\r\n  private updateStyle(timer: number) {\r\n    this.styleWithAnim.innerHTML = `\r\n    .${this.animationClass} {\r\n      animation: ${this.animationKeyframePropertyName} ${timer}ms ease;\r\n    }\r\n\r\n    @keyframes ${this.animationKeyframePropertyName} {\r\n      to {\r\n        transform: translateX(-100%);\r\n      }\r\n    }\r\n    `;\r\n  }\r\n\r\n  private updateTheme({ backdrop, color, icon }: Theme) {\r\n    this.toasterIcon!.className = icon;\r\n    this.toaster?.style.setProperty('background', backdrop);\r\n    this.toasterIcon?.style.setProperty('color', color);\r\n    this.toasterText?.style.setProperty('color', color);\r\n  }\r\n\r\n  private show(timer: number) {\r\n    if (this.toasterInScreen) {\r\n      this.hide().then(() => this.show(timer));\r\n      return;\r\n    }\r\n    this.toaster!.style.scale = '0';\r\n    this.toasterInScreen = true;\r\n    this.toasterProgress!.style.transform = '';\r\n    document.body.appendChild(this.toaster!);\r\n    this.events.push(setTimeout(() => this.anim.scaleIn(this.toaster!), 100));\r\n    this.events.push(\r\n      setTimeout(() => (this.toasterProgress!.style.transform = 'translateX(-100%)'), timer - 10),\r\n    );\r\n  }\r\n\r\n  public async hide() {\r\n    return new Promise((r) => {\r\n      try {\r\n        this.events.forEach((e) => clearTimeout(e));\r\n        this.anim.scaleOut(this.toaster!, () => {\r\n          this.toaster?.remove();\r\n          this.toasterInScreen = false;\r\n          r(true);\r\n        });\r\n      } catch (error) {\r\n        console.error(error);\r\n        r(false);\r\n      } finally {\r\n        if (typeof this.afterFunction === 'function') this.afterFunction();\r\n        this.afterFunction = void 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  public addAfterFunction(func: () => void) {\r\n    this.afterFunction = func;\r\n    return this;\r\n  }\r\n\r\n  public info(message?: string, timerInMilliseconds = 6000) {\r\n    this.updateStyle(timerInMilliseconds);\r\n    this.updateTheme(this.themes.info);\r\n    this.toasterText!.textContent = message ? message : '';\r\n    this.show(timerInMilliseconds);\r\n    this.events.push(setTimeout(() => this.hide(), timerInMilliseconds));\r\n  }\r\n\r\n  public alert(message?: string, timerInMilliseconds = 6000) {\r\n    this.updateStyle(timerInMilliseconds);\r\n    this.updateTheme(this.themes.alert);\r\n    this.toasterText!.textContent = message ? message : '';\r\n    this.show(timerInMilliseconds);\r\n    this.events.push(setTimeout(() => this.hide(), timerInMilliseconds));\r\n  }\r\n\r\n  public success(message?: string, timerInMilliseconds = 6000) {\r\n    this.updateStyle(timerInMilliseconds);\r\n    this.updateTheme(this.themes.success);\r\n    this.toasterText!.textContent = message ? message : '';\r\n    this.show(timerInMilliseconds);\r\n    this.events.push(setTimeout(() => this.hide(), timerInMilliseconds));\r\n  }\r\n\r\n  public danger(message?: string, timerInMilliseconds = 6000) {\r\n    this.updateStyle(timerInMilliseconds);\r\n    this.updateTheme(this.themes.danger);\r\n    this.toasterText!.textContent = message ? message : '';\r\n    this.show(timerInMilliseconds);\r\n    this.events.push(setTimeout(() => this.hide(), timerInMilliseconds));\r\n  }\r\n\r\n  public getAnimator() {\r\n    return this.anim;\r\n  }\r\n\r\n  public static get(anim?: AnimationTool) {\r\n    if (!ToasterTool.tool) {\r\n      if (!anim) anim = AnimationTool.get();\r\n      ToasterTool.tool = new ToasterTool(anim);\r\n      ToasterTool.tool.generate();\r\n    }\r\n    return ToasterTool.tool;\r\n  }\r\n}\r\n", "import { JsonRestApi } from '@App/api/JsonRestApi';\r\nimport type { ExceptionDto } from '@App/data/dto/ExceptionDto';\r\nimport type { SessionDto } from '@App/data/dto/SessionDto';\r\nimport { UserValidation } from '@App/data/validation/UserValidation';\r\nimport { AnimationTool } from '@App/tools/AnimationTool';\r\nimport { ScreenProgressTool } from '@App/tools/ScreenProgressTool';\r\nimport { ToasterTool } from '@App/tools/ToasterTool';\r\n\r\nconst anim = AnimationTool.get();\r\nconst toaster = ToasterTool.get();\r\nconst progress = ScreenProgressTool.get();\r\nconst rest = JsonRestApi.get();\r\n\r\nexport function runAuthenticationManager(form: HTMLFormElement) {\r\n  let path = '';\r\n  const genericError = form.dataset.generic ? form.dataset.generic : 'Oopss...';\r\n  const successMessage = form.dataset.success ? form.dataset.success : '#';\r\n  const validation = new UserValidation();\r\n  const emailInput = form.querySelector('input#email') as HTMLInputElement;\r\n  const emailMessage = emailInput.dataset.message!;\r\n  const passwordInput = form.querySelector('input#password') as HTMLInputElement;\r\n  const passwordMessage = passwordInput.dataset.message!;\r\n  const submitButton = form.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\r\n  const signUpButton = form.querySelector('#session-sign-up') as HTMLButtonElement;\r\n  const submit = document.createElement('button');\r\n\r\n  if (new URLSearchParams(location.search).get('clear') === 'true') {\r\n    toaster.danger(form.dataset.forbidden ?? '');\r\n  }\r\n\r\n  emailInput.addEventListener('input', () => {\r\n    emailInput.dataset.error = String(!validation.isEmailValid(emailInput.value.trim()));\r\n  });\r\n\r\n  passwordInput.addEventListener('input', () => {\r\n    passwordInput.dataset.error = String(!validation.isPasswordValid(passwordInput.value.trim()));\r\n  });\r\n\r\n  submitButton.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    path = '/authentication/session';\r\n    submit.click();\r\n  });\r\n\r\n  signUpButton.addEventListener('click', () => {\r\n    path = '/authentication/sign-up';\r\n    submit.click();\r\n  });\r\n\r\n  form.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!validation.isEmailValid(emailInput.value.trim())) {\r\n      anim.shake(emailInput);\r\n      toaster.danger(emailMessage);\r\n      return;\r\n    }\r\n    if (!validation.isPasswordValid(passwordInput.value.trim())) {\r\n      anim.shake(passwordInput);\r\n      toaster.danger(passwordMessage);\r\n      return;\r\n    }\r\n    sendAuthenticationRequest();\r\n  });\r\n\r\n  async function sendAuthenticationRequest() {\r\n    progress.show();\r\n    try {\r\n      const payload = JSON.stringify({\r\n        email: emailInput.value.trim(),\r\n        password: passwordInput.value.trim(),\r\n      });\r\n      const { json } = await rest.POST<SessionDto>(path, payload);\r\n      if (!json) {\r\n        toaster.alert(genericError);\r\n        return;\r\n      }\r\n      if (!json.user) {\r\n        toaster.alert((json as unknown as ExceptionDto).message);\r\n        return;\r\n      }\r\n      toaster\r\n        .addAfterFunction(() => {\r\n          if (new URLSearchParams(location.search).get('clear') === 'true') window.close();\r\n          else window.location.href = '/';\r\n        })\r\n        .success(successMessage.replace('#', json.user.username));\r\n    } catch (error) {\r\n      console.log(error);\r\n      toaster.alert(genericError);\r\n    } finally {\r\n      progress.hide();\r\n    }\r\n  }\r\n\r\n  submit.type = 'submit';\r\n  submit.textContent = 'Submit';\r\n  submit.classList.add('dn');\r\n  form.appendChild(submit);\r\n}\r\n", "export class ImageTool {\r\n  private static tool: ImageTool;\r\n\r\n  private constructor() {}\r\n\r\n  public imageToBlob(file: File, width = 128, height = 128, resize = true) {\r\n    return new Promise<Blob | null>((resolve) => {\r\n      try {\r\n        if (!file) return resolve(null);\r\n        const url = URL.createObjectURL(file as Blob);\r\n        const img = new Image();\r\n        img.onload = async () => {\r\n          const w = img.width;\r\n          const h = img.height;\r\n          const canvas = document.createElement('canvas');\r\n          const ctx = canvas.getContext('2d')!;\r\n          const nImage =\r\n            (resize &&\r\n              (w < h\r\n                ? await this.resizeHeight(img, w, h)\r\n                : w > h\r\n                  ? await this.resizeWidth(img, w, h)\r\n                  : img)) ||\r\n            img;\r\n          ctx.canvas.width = width;\r\n          ctx.canvas.height = height;\r\n          ctx.drawImage(nImage, 0, 0, width, height);\r\n          ctx.canvas.toBlob(\r\n            (b) => {\r\n              URL.revokeObjectURL(url);\r\n              resolve(b);\r\n            },\r\n            'image/jpeg',\r\n            0.9,\r\n          );\r\n        };\r\n        img.crossOrigin = 'Anonymous';\r\n        img.src = url;\r\n      } catch (error) {\r\n        resolve(null);\r\n      }\r\n    });\r\n  }\r\n\r\n  public imageToBlobWhithoutResize(file: File, quality = 0.85) {\r\n    if (quality > 1 || quality < 0) quality = 1;\r\n    return new Promise<Blob | null>((resolve) => {\r\n      try {\r\n        if (!file) return resolve(null);\r\n        const url = URL.createObjectURL(file as Blob);\r\n        const img = new Image();\r\n        img.onload = async () => {\r\n          const w = img.width * 0.8;\r\n          const h = img.height * 0.8;\r\n          const canvas = document.createElement('canvas');\r\n          const ctx = canvas.getContext('2d')!;\r\n\r\n          ctx.canvas.width = w;\r\n          ctx.canvas.height = h;\r\n          ctx.drawImage(img, 0, 0, w, h);\r\n          ctx.canvas.toBlob(\r\n            (b) => {\r\n              URL.revokeObjectURL(url);\r\n              resolve(b);\r\n            },\r\n            'image/jpeg',\r\n            quality,\r\n          );\r\n        };\r\n        img.crossOrigin = 'Anonymous';\r\n        img.src = url;\r\n      } catch (error) {\r\n        resolve(null);\r\n      }\r\n    });\r\n  }\r\n\r\n  private resizeHeight(img: HTMLImageElement, width: number, height: number) {\r\n    return new Promise<HTMLImageElement>((resolve) => {\r\n      const cv = document.createElement('canvas');\r\n      const context = cv.getContext('2d')!;\r\n      context.canvas.width = width;\r\n      context.canvas.height = width;\r\n      context.drawImage(img, 0, height * 0.2, width, width, 0, 0, width, width);\r\n      const image = new Image();\r\n      image.onload = () => resolve(image);\r\n      image.src = context.canvas.toDataURL();\r\n    });\r\n  }\r\n\r\n  private resizeWidth(img: HTMLImageElement, width: number, height: number) {\r\n    return new Promise<HTMLImageElement>((resolve) => {\r\n      const cv = document.createElement('canvas');\r\n      const context = cv.getContext('2d')!;\r\n      context.canvas.width = height;\r\n      context.canvas.height = height;\r\n      context.drawImage(img, width * 0.2, 0, height, height, 0, 0, height, height);\r\n      const image = new Image();\r\n      image.onload = () => resolve(image);\r\n      image.src = context.canvas.toDataURL();\r\n    });\r\n  }\r\n\r\n  public static get() {\r\n    if (!ImageTool.tool) {\r\n      ImageTool.tool = new ImageTool();\r\n    }\r\n    return ImageTool.tool;\r\n  }\r\n}\r\n", "import { JsonRestApi } from '@App/api/JsonRestApi';\r\nimport type { ExceptionDto } from '@App/data/dto/ExceptionDto';\r\nimport { User } from '@App/data/entities/User';\r\nimport { UserValidation } from '@App/data/validation/UserValidation';\r\nimport { AnimationTool } from '@App/tools/AnimationTool';\r\nimport { ImageTool } from '@App/tools/ImageTool';\r\nimport { ScreenProgressTool } from '@App/tools/ScreenProgressTool';\r\nimport { ToasterTool } from '@App/tools/ToasterTool';\r\n\r\nconst imageTool = ImageTool.get();\r\nconst toaster = ToasterTool.get();\r\nconst anim = AnimationTool.get();\r\nconst progress = ScreenProgressTool.get();\r\nconst rest = JsonRestApi.get();\r\nconst validation = new UserValidation();\r\n\r\nfunction editProfileManager(form: HTMLFormElement) {\r\n  const userEmail = form.dataset.auth;\r\n  const main = document.querySelector('main')!;\r\n  const header = document.querySelector('header')!;\r\n  const avatarInput = form.querySelector<HTMLInputElement>('#avatar-input')!;\r\n  const avatarImg = form.querySelector<HTMLImageElement>('.avatar')!;\r\n  const headerAvatarImg = document\r\n    .querySelector('header')!\r\n    .querySelector<HTMLImageElement>('.avatar')!;\r\n  const avatarMessage = avatarInput.dataset.message!;\r\n  const spanUserName = form.querySelector('#span-user-name');\r\n  const modal = form.querySelector<HTMLDivElement>('.modal')!;\r\n  const modalCancel = modal.querySelector<HTMLButtonElement>('button.danger');\r\n  const modalConfirm = modal.querySelector<HTMLButtonElement>('button.primary');\r\n  let lastAvatarURL = '';\r\n\r\n  main.style.minHeight = `calc(95vh - ${header.clientHeight}px)`;\r\n\r\n  avatarImg.addEventListener('click', () => avatarInput.click());\r\n  avatarInput.addEventListener('input', async () => {\r\n    progress.show();\r\n    try {\r\n      if (!avatarInput.files || !avatarInput.files[0]) {\r\n        toaster.info(avatarMessage);\r\n        anim.shake(avatarImg);\r\n        return;\r\n      }\r\n      const avatar = await imageTool.imageToBlob(avatarInput.files[0]);\r\n      if (!avatar) {\r\n        toaster.info(avatarMessage);\r\n        anim.shake(avatarImg);\r\n        return;\r\n      }\r\n\r\n      const payload = new FormData();\r\n      payload.set('avatar', avatar);\r\n      const res = await fetch('/api/authentication/user/avatar', {\r\n        method: 'PATCH',\r\n        body: payload,\r\n        credentials: 'include',\r\n      });\r\n      const json = (await res.json()) as ExceptionDto;\r\n      if (res.ok) toaster.success(json.message);\r\n      else toaster.danger(json.message);\r\n      URL.revokeObjectURL(lastAvatarURL);\r\n      lastAvatarURL = URL.createObjectURL(avatar);\r\n      avatarImg.src = lastAvatarURL;\r\n      headerAvatarImg.src = lastAvatarURL;\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      progress.hide();\r\n    }\r\n  });\r\n\r\n  const passwordInput = modal.querySelector<HTMLInputElement>('#password')!;\r\n  let password = passwordInput.value.trim();\r\n  let isPasswordValid = validation.isPasswordValid(password);\r\n\r\n  passwordInput.addEventListener('input', () => {\r\n    password = passwordInput.value.trim();\r\n    isPasswordValid = validation.isPasswordValid(password);\r\n    passwordInput.dataset.error = String(!isPasswordValid);\r\n  });\r\n\r\n  const nameInput = form.querySelector<HTMLInputElement>('#name')!;\r\n  const defaultName = nameInput.value.trim();\r\n  let name = defaultName;\r\n  let isNameValid = validation.isNameValid(name);\r\n\r\n  nameInput.addEventListener('input', () => {\r\n    name = nameInput.value.trim();\r\n    isNameValid = validation.isNameValid(name);\r\n    nameInput.dataset.error = String(!isNameValid);\r\n  });\r\n\r\n  const emailInput = form.querySelector<HTMLInputElement>('#email')!;\r\n  const defaultEmail = emailInput.value.trim();\r\n  let email = defaultEmail;\r\n  let isEmailValid = validation.isEmailValid(email);\r\n\r\n  emailInput.addEventListener('input', () => {\r\n    email = emailInput.value.trim();\r\n    isEmailValid = validation.isEmailValid(email);\r\n    emailInput.dataset.error = String(!isEmailValid);\r\n  });\r\n\r\n  const usernameInput = form.querySelector<HTMLInputElement>('#username')!;\r\n  const usernameAlreadyInUse = usernameInput.dataset.usernameAlreadyRegistered;\r\n  let username = usernameInput.value.trim();\r\n  let isUsernameValid = validation.isUsernameValid(username);\r\n\r\n  usernameInput.addEventListener('input', () => {\r\n    usernameInput.value = validation.normalizeUsername(usernameInput.value);\r\n    username = usernameInput.value.trim();\r\n    isUsernameValid = validation.isUsernameValid(username);\r\n    usernameInput.dataset.error = String(!isUsernameValid);\r\n  });\r\n\r\n  form.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    progress.show();\r\n    if (!isUsernameValid) {\r\n      toaster.alert(nameInput.dataset.message);\r\n      return;\r\n    }\r\n    if (!isEmailValid) {\r\n      toaster.alert(emailInput.dataset.message);\r\n      return;\r\n    }\r\n    if (!isNameValid) {\r\n      toaster.alert(nameInput.dataset.message);\r\n      return;\r\n    }\r\n    const { status, json } = await rest.GET<User>(\r\n      'user/passwordu, JSON.stringify({password, newPassword})sername/' + username,\r\n    );\r\n    if (status === 200) {\r\n      if (json?.email !== userEmail) toaster.info(usernameAlreadyInUse?.replace('#', username));\r\n    }\r\n    if (defaultEmail !== email && isEmailValid) {\r\n      modal?.classList.remove('out-bottom');\r\n      progress.hide();\r\n      return;\r\n    }\r\n    updateProfile();\r\n  });\r\n\r\n  async function updateProfile(includeCredentials = false) {\r\n    try {\r\n      const payload = includeCredentials ? { email, password, name, username } : { name, username };\r\n      const { json, status } = await rest.PUT<User>(\r\n        '/authentication/user',\r\n        JSON.stringify(payload),\r\n      );\r\n      if (status === 200) {\r\n        toaster.success(form.dataset.success);\r\n        spanUserName!.textContent = json!.name;\r\n        return history.pushState(null, '', '/u/' + json!.username);\r\n      } else {\r\n        toaster.danger((json as unknown as ExceptionDto).message);\r\n        console.log(json);\r\n      }\r\n    } catch (error) {\r\n      toaster.danger('Oopsss...');\r\n      console.log(error);\r\n    } finally {\r\n      progress.hide();\r\n    }\r\n  }\r\n\r\n  modalCancel?.addEventListener('click', () => modal.classList.add('out-bottom'));\r\n  modalConfirm?.addEventListener('click', () => {\r\n    if (!isPasswordValid) {\r\n      toaster.alert(passwordInput.dataset.message);\r\n      anim.shake(passwordInput);\r\n      return;\r\n    }\r\n    progress.show();\r\n    updateProfile(true);\r\n  });\r\n}\r\n\r\nfunction updatePasswordManager(modal: HTMLElement, button: HTMLButtonElement) {\r\n  button.addEventListener('click', () => modal.classList.remove('out-left'));\r\n\r\n  const cancel = modal.querySelector<HTMLButtonElement>('button.danger');\r\n  const form = modal.querySelector('form')!;\r\n\r\n  const passwordInput = modal.querySelector<HTMLInputElement>('#c-password')!;\r\n  let password = passwordInput.value.trim();\r\n  let isPasswordValid = validation.isPasswordValid(password);\r\n\r\n  passwordInput.addEventListener('input', () => {\r\n    password = passwordInput.value.trim();\r\n    isPasswordValid = validation.isPasswordValid(password);\r\n    passwordInput.dataset.error = String(!isPasswordValid);\r\n  });\r\n\r\n  const onConfirmInput = () => {\r\n    confirmNewPassword = confirmNewPasswordInput.value.trim();\r\n    confirmNewPasswordInput.dataset.error = String(\r\n      !(isNewPasswordValid && newPassword === confirmNewPassword),\r\n    );\r\n  };\r\n\r\n  const newPasswordInput = modal.querySelector<HTMLInputElement>('#n-password')!;\r\n  let newPassword = newPasswordInput.value.trim();\r\n  let isNewPasswordValid = validation.isPasswordValid(newPassword);\r\n\r\n  newPasswordInput.addEventListener('input', () => {\r\n    newPassword = newPasswordInput.value.trim();\r\n    isNewPasswordValid = validation.isPasswordValid(newPassword);\r\n    newPasswordInput.dataset.error = String(!isNewPasswordValid);\r\n    onConfirmInput();\r\n  });\r\n\r\n  const confirmNewPasswordInput = modal.querySelector<HTMLInputElement>('#c-n-password')!;\r\n  let confirmNewPassword = confirmNewPasswordInput.value.trim();\r\n\r\n  confirmNewPasswordInput.addEventListener('input', onConfirmInput);\r\n\r\n  cancel?.addEventListener('click', () => {\r\n    modal.classList.add('out-left');\r\n  });\r\n\r\n  form.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    progress.show();\r\n    try {\r\n      if (!isPasswordValid) {\r\n        toaster.danger(passwordInput.dataset.message);\r\n        anim.shake(passwordInput);\r\n        return;\r\n      }\r\n      if (!isNewPasswordValid) {\r\n        toaster.danger(newPasswordInput.dataset.message);\r\n        anim.shake(newPasswordInput);\r\n        return;\r\n      }\r\n      if (confirmNewPassword !== newPassword) {\r\n        toaster.danger(confirmNewPasswordInput.dataset.message);\r\n        anim.shake(confirmNewPasswordInput);\r\n        return;\r\n      }\r\n      if (confirmNewPassword === password) {\r\n        toaster.danger(confirmNewPasswordInput.dataset.messageEqual);\r\n        anim.shake(confirmNewPasswordInput);\r\n        anim.shake(newPasswordInput);\r\n        anim.shake(passwordInput);\r\n        return;\r\n      }\r\n      const { json, status } = await rest.PATCH(\r\n        '/authentication/user/password',\r\n        JSON.stringify({ password, newPassword }),\r\n      );\r\n      if (status === 204) {\r\n        passwordInput.value = '';\r\n        password = '';\r\n        newPassword = '';\r\n        newPasswordInput.value = '';\r\n        confirmNewPassword = '';\r\n        confirmNewPasswordInput.value = '';\r\n        cancel?.click();\r\n        toaster.success(form.dataset.success);\r\n        return;\r\n      }\r\n      toaster.danger((json as unknown as ExceptionDto).message);\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      progress.hide();\r\n    }\r\n  });\r\n}\r\n\r\nexport function runProfileManager() {\r\n  const editProfile = document.getElementById('edit-profile') as HTMLFormElement;\r\n\r\n  if (editProfile) {\r\n    editProfileManager(editProfile);\r\n    updatePasswordManager(\r\n      document.getElementById('modal-password')!,\r\n      document.getElementById('button-update-password') as HTMLButtonElement,\r\n    );\r\n  }\r\n}\r\n", "export class QuizValidation {\r\n  private readonly keywordsRegex = /[^a-zA-Z0-9,_\\-@#!%&?*\\s]/g;\r\n\r\n  public isTitleValid(title: string) {\r\n    return typeof title === 'string' && title.length >= 5;\r\n  }\r\n\r\n  public catchKeywords(keywords: string) {\r\n    if (!keywords) return [];\r\n    return this.normalizeKeywords(keywords)\r\n      .replace(/,/g, ' ')\r\n      .split(' ')\r\n      .filter((k) => k.length >= 1);\r\n  }\r\n\r\n  public normalizeKeywords(keywords: string) {\r\n    return typeof keywords === 'string'\r\n      ? keywords.replace(this.keywordsRegex, '').toLocaleLowerCase()\r\n      : '';\r\n  }\r\n\r\n  public isQuestTitleValid(title: string) {\r\n    return typeof title === 'string' && title.length <= 150 && title.length >= 5;\r\n  }\r\n\r\n  public normalizeQuestTitle(title: string) {\r\n    return typeof title === 'string' ? title.replace(/\\r\\n|\\r|\\n/g, '') : '';\r\n  }\r\n}\r\n", "import { QuizValidation } from '@App/data/validation/QuizValidation';\r\nimport { AnimationTool } from '@App/tools/AnimationTool';\r\nimport { ImageTool } from '@App/tools/ImageTool';\r\nimport { ScreenProgressTool } from '@App/tools/ScreenProgressTool';\r\nimport { ToasterTool } from '@App/tools/ToasterTool';\r\n\r\nconst progress = ScreenProgressTool.get();\r\nconst imageTool = ImageTool.get();\r\nconst validation = new QuizValidation();\r\nconst anim = AnimationTool.get();\r\nconst toaster = ToasterTool.get(anim);\r\n\r\nexport function quizCreationManager(form: HTMLFormElement) {\r\n  const addImage = form.querySelector('#btn-add-f-img') as HTMLButtonElement;\r\n  const imageInput = form.querySelector('input[type=\"file\"]') as HTMLInputElement;\r\n  const image = form.querySelector('#image-preview') as HTMLImageElement;\r\n  let imageSrc = '';\r\n  let blob: Blob;\r\n\r\n  addImage.addEventListener('click', () => imageInput.click());\r\n  image.addEventListener('click', () => imageInput.click());\r\n  imageInput.addEventListener('input', () => {\r\n    progress.show();\r\n    setTimeout(async () => {\r\n      try {\r\n        if (!imageInput.files || !imageInput.files[0]) return;\r\n        const imgBlob = await imageTool.imageToBlobWhithoutResize(imageInput.files[0]);\r\n        if (!imgBlob) return toaster.alert('Oopss...');\r\n        if (imgBlob.size > 1024000) {\r\n          console.log(imgBlob.size);\r\n          toaster.danger(imageInput.dataset.message);\r\n          return;\r\n        }\r\n        URL.revokeObjectURL(imageSrc);\r\n        imageSrc = URL.createObjectURL(imgBlob);\r\n        image.src = imageSrc;\r\n        blob = imgBlob;\r\n        if (image.classList.contains('dn')) {\r\n          image.classList.remove('dn');\r\n          addImage.classList.add('dn');\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      } finally {\r\n        progress.hide();\r\n      }\r\n    }, 500);\r\n  });\r\n\r\n  const titleInput = form.querySelector('#title') as HTMLInputElement;\r\n  let title = titleInput.value;\r\n  let isTitleValid = validation.isTitleValid(title);\r\n\r\n  titleInput.addEventListener('input', () => {\r\n    title = titleInput.value;\r\n    isTitleValid = validation.isTitleValid(title);\r\n  });\r\n\r\n  const descriptionInput = form.querySelector('#description') as HTMLInputElement;\r\n  const displayDescriptionLen = form.querySelector('#description-len') as HTMLElement;\r\n  let description = descriptionInput.value;\r\n\r\n  displayDescriptionLen.textContent = (350 - description.length).toString();\r\n\r\n  descriptionInput.addEventListener('input', () => {\r\n    description = descriptionInput.value;\r\n    displayDescriptionLen.textContent = (350 - description.length).toString();\r\n  });\r\n\r\n  const keywordInput = form.querySelector('#keywords') as HTMLInputElement;\r\n  const keywordsPreview = form.querySelector('#preview-keywords') as HTMLElement;\r\n  let keywords = validation.catchKeywords(keywordInput.value);\r\n\r\n  keywordInput.addEventListener('input', () => {\r\n    keywords = validation.catchKeywords(keywordInput.value);\r\n    keywordsPreview.innerHTML = '';\r\n    keywords.forEach((key) => {\r\n      const preview = document.createElement('span');\r\n      preview.textContent = key;\r\n      preview.title = key;\r\n      keywordsPreview.appendChild(preview);\r\n    });\r\n  });\r\n\r\n  const submit = async () => {\r\n    progress.show();\r\n    try {\r\n      if (!blob) {\r\n        toaster.alert(addImage.dataset.message);\r\n        if (!addImage.classList.contains('dn')) {\r\n          addImage.scrollIntoView();\r\n          anim.shake(addImage);\r\n        }\r\n        return;\r\n      }\r\n      if (!isTitleValid) {\r\n        toaster.alert(titleInput.dataset.message);\r\n        titleInput.scrollIntoView();\r\n        anim.shake(titleInput);\r\n        return;\r\n      }\r\n      if (keywords.length < 1) {\r\n        toaster.alert(keywordInput.dataset.message);\r\n        keywordInput.scrollIntoView();\r\n        anim.shake(keywordInput);\r\n        return;\r\n      }\r\n      const payload = new FormData();\r\n      payload.set('title', title);\r\n      payload.set('description', description ? description : '');\r\n      payload.set('keywords', keywords.join(','));\r\n      payload.set('image', blob);\r\n\r\n      const result = await fetch('/api/quiz', {\r\n        body: payload,\r\n        credentials: 'include',\r\n        method: 'POST',\r\n      });\r\n      console.log(result);\r\n      if (result.status === 403) {\r\n        window.open('/session?clear=true', '_blank', 'focus');\r\n        return;\r\n      }\r\n      const json = await result.json();\r\n      if (!result.ok) {\r\n        toaster.danger(json.message);\r\n      } else window.location.href = json.url; //Termine\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      progress.hide();\r\n    }\r\n  };\r\n\r\n  form.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    submit();\r\n  });\r\n}\r\n", "import { ScreenProgressTool } from '@App/tools/ScreenProgressTool';\r\nimport { ToasterTool } from '@App/tools/ToasterTool';\r\n\r\nexport function forbidden() {\r\n  ToasterTool.get().hide();\r\n  ScreenProgressTool.get().hide();\r\n  ToasterTool.get().alert('Forbidden (403)');\r\n  window.open('/session?clear=true', '_blank', 'focus');\r\n}\r\n", "import { JsonRestApi } from '@App/api/JsonRestApi';\r\nimport type { ExceptionDto } from '@App/data/dto/ExceptionDto';\r\nimport type { QuestDto } from '@App/data/dto/QuestDto';\r\nimport { QuizValidation } from '@App/data/validation/QuizValidation';\r\nimport { AnimationTool } from '@App/tools/AnimationTool';\r\nimport { ImageTool } from '@App/tools/ImageTool';\r\nimport { ScreenProgressTool } from '@App/tools/ScreenProgressTool';\r\nimport { ToasterTool } from '@App/tools/ToasterTool';\r\nimport { forbidden } from '@App/utils/forbidden';\r\nimport { generateHTML } from '@App/utils/generateHTML';\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var listOfQuests: Array<QuestDto>;\r\n}\r\n\r\nconst progress = ScreenProgressTool.get();\r\nconst imageTool = ImageTool.get();\r\nconst validation = new QuizValidation();\r\nconst anim = AnimationTool.get();\r\nconst toaster = ToasterTool.get(anim);\r\nconst rest = JsonRestApi.get();\r\n\r\nlet quests = typeof listOfQuests !== 'undefined' ? listOfQuests : [];\r\n\r\nexport function quizEditManager(form: HTMLFormElement) {\r\n  const imageInput = form.querySelector('input[type=\"file\"]') as HTMLInputElement;\r\n  const image = form.querySelector('#image-preview') as HTMLImageElement;\r\n  let imageSrc = '';\r\n  let blob: Blob;\r\n\r\n  image.addEventListener('click', () => imageInput.click());\r\n  imageInput.addEventListener('input', () => {\r\n    progress.show();\r\n    setTimeout(async () => {\r\n      try {\r\n        if (!imageInput.files || !imageInput.files[0]) return;\r\n        const imgBlob = await imageTool.imageToBlobWhithoutResize(imageInput.files[0]);\r\n        if (!imgBlob) return toaster.alert('Oopss...');\r\n        if (imgBlob.size > 1024000) {\r\n          toaster.danger(imageInput.dataset.message);\r\n          return;\r\n        }\r\n        URL.revokeObjectURL(imageSrc);\r\n        imageSrc = URL.createObjectURL(imgBlob);\r\n        image.src = imageSrc;\r\n        blob = imgBlob;\r\n        if (image.classList.contains('dn')) {\r\n          image.classList.remove('dn');\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      } finally {\r\n        progress.hide();\r\n      }\r\n    }, 500);\r\n  });\r\n\r\n  const titleInput = form.querySelector('#title') as HTMLInputElement;\r\n  let title = titleInput.value;\r\n  let isTitleValid = validation.isTitleValid(title);\r\n\r\n  titleInput.addEventListener('input', () => {\r\n    title = titleInput.value;\r\n    isTitleValid = validation.isTitleValid(title);\r\n  });\r\n\r\n  const descriptionInput = form.querySelector('#description') as HTMLInputElement;\r\n  const displayDescriptionLen = form.querySelector('#description-len') as HTMLElement;\r\n  let description = descriptionInput.value;\r\n\r\n  displayDescriptionLen.textContent = (350 - description.length).toString();\r\n\r\n  descriptionInput.addEventListener('input', () => {\r\n    description = descriptionInput.value;\r\n    displayDescriptionLen.textContent = (350 - description.length).toString();\r\n  });\r\n\r\n  const keywordInput = form.querySelector('#keywords') as HTMLInputElement;\r\n  const keywordsPreview = form.querySelector('#preview-keywords') as HTMLElement;\r\n  let keywords = validation.catchKeywords(keywordInput.value);\r\n\r\n  const showKeywords = () => {\r\n    keywordsPreview.innerHTML = '';\r\n    keywords.forEach((key) => {\r\n      const preview = document.createElement('span');\r\n      preview.textContent = key;\r\n      preview.title = key;\r\n      keywordsPreview.appendChild(preview);\r\n    });\r\n  };\r\n\r\n  keywordInput.addEventListener('input', () => {\r\n    keywords = validation.catchKeywords(keywordInput.value);\r\n    showKeywords();\r\n  });\r\n\r\n  showKeywords();\r\n\r\n  const submit = async () => {\r\n    progress.show();\r\n    try {\r\n      if (!isTitleValid) {\r\n        toaster.alert(titleInput.dataset.message);\r\n        titleInput.scrollIntoView();\r\n        anim.shake(titleInput);\r\n        return;\r\n      }\r\n      if (keywords.length < 1) {\r\n        toaster.alert(keywordInput.dataset.message);\r\n        keywordInput.scrollIntoView();\r\n        anim.shake(keywordInput);\r\n        return;\r\n      }\r\n      const payload = new FormData();\r\n      payload.set('title', title);\r\n      payload.set('description', description ? description : '');\r\n      payload.set('keywords', keywords.join(','));\r\n      payload.set('image', blob);\r\n\r\n      const result = await fetch('/api/quiz', {\r\n        body: payload,\r\n        credentials: 'include',\r\n        method: 'POST',\r\n      });\r\n      if (result.status === 403) {\r\n        return forbidden();\r\n      }\r\n      const json = await result.json();\r\n      if (!result.ok) {\r\n        toaster.danger(json.message);\r\n      } else window.location.href = json.url; //Termine\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      progress.hide();\r\n    }\r\n  };\r\n\r\n  form.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    submit();\r\n  });\r\n\r\n  formAddNewQuestManager();\r\n}\r\n\r\nfunction formAddNewQuestManager() {\r\n  const questPreview = document.getElementById('preview-quests')!;\r\n  const quizSlug = document.getElementById('quiz-slug')!.dataset.value;\r\n  const addQuestButton = document.querySelector('#button-add-new-quest')! as HTMLButtonElement;\r\n  const questModal = document.getElementById('add-quest-modal')!;\r\n  const formAddQuest = questModal.querySelector('form')!;\r\n  const hideAddQuestModal = [\r\n    questModal.querySelector('#hide-form-add-quest') as HTMLButtonElement,\r\n    questModal.querySelector('button.danger') as HTMLButtonElement,\r\n  ];\r\n  const questImagePreview = questModal.querySelector('#quest-image-preview') as HTMLImageElement;\r\n  const questImageInput = questModal.querySelector('#quest-image-input') as HTMLInputElement;\r\n  const questTitle = questModal.querySelector('#quest-quest') as HTMLInputElement;\r\n\r\n  const alternativeA = formAddQuest.querySelector('#alternative-a') as HTMLInputElement;\r\n  const alternativeB = formAddQuest.querySelector('#alternative-b') as HTMLInputElement;\r\n  const alternativeC = formAddQuest.querySelector('#alternative-c') as HTMLInputElement;\r\n  const alternativeD = formAddQuest.querySelector('#alternative-d') as HTMLInputElement;\r\n  const alternativeE = formAddQuest.querySelector('#alternative-e') as HTMLInputElement;\r\n\r\n  let questImageSrc = '';\r\n  let questImageBlob: Blob | null = null;\r\n\r\n  addQuestButton.addEventListener('click', () => {\r\n    questModal.style.display = '';\r\n    setTimeout(() => questModal.classList.remove('out-right'), 10);\r\n  });\r\n  questModal.addEventListener('click', ({ target }) => {\r\n    if (\r\n      (target as HTMLElement).id === questModal.id &&\r\n      formAddQuest.dataset.updateQuest === 'true'\r\n    ) {\r\n      formAddQuest.dataset.updateQuest = 'false';\r\n      resetAddNewQuestForm();\r\n      hideAddQuestModal[0].click();\r\n    }\r\n  });\r\n  hideAddQuestModal.forEach((button) =>\r\n    button.addEventListener('click', () => {\r\n      questModal.classList.add('out-right');\r\n      setTimeout(() => (questModal.style.display = 'none'), 500);\r\n    }),\r\n  );\r\n\r\n  questImagePreview.addEventListener('click', () => questImageInput.click());\r\n  questImageInput.addEventListener('input', () => {\r\n    progress.show();\r\n    setTimeout(async () => {\r\n      try {\r\n        if (!questImageInput.files || !questImageInput.files[0]) return;\r\n        const imgBlob = await imageTool.imageToBlobWhithoutResize(questImageInput.files[0]);\r\n        if (!imgBlob) return toaster.alert('Oopss...');\r\n        if (imgBlob.size > 1024000) {\r\n          toaster.danger(questImageInput.dataset.message);\r\n          return;\r\n        }\r\n        URL.revokeObjectURL(questImageSrc);\r\n        questImageSrc = URL.createObjectURL(imgBlob);\r\n        questImagePreview.src = questImageSrc;\r\n        questImageBlob = imgBlob;\r\n      } catch (error) {\r\n        console.log(error);\r\n      } finally {\r\n        progress.hide();\r\n      }\r\n    }, 500);\r\n  });\r\n\r\n  function resetAddNewQuestForm() {\r\n    [alternativeA, alternativeB, alternativeC, alternativeD, alternativeE].forEach(\r\n      (a) => (a.value = ''),\r\n    );\r\n    questImageBlob = null;\r\n    questImageInput.value = '';\r\n    questTitle.value = '';\r\n    questImagePreview.src = questImagePreview.dataset.defaultSrc!;\r\n  }\r\n\r\n  const normalizeQuestTitle = () => {\r\n    questTitle.value = validation.normalizeQuestTitle(questTitle.value);\r\n  };\r\n  questTitle.addEventListener('input', normalizeQuestTitle);\r\n\r\n  formAddQuest.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    let error = false;\r\n    progress.show();\r\n    try {\r\n      const title = questTitle.value;\r\n      if (!validation.isQuestTitleValid(title)) {\r\n        toaster.danger(questTitle.dataset.message);\r\n        anim.shake(questTitle);\r\n        return (error = true);\r\n      }\r\n      const opt = [alternativeC, alternativeD, alternativeE];\r\n      if (alternativeA.value.length < 1) {\r\n        toaster.danger(alternativeA.dataset.message);\r\n        anim.shake(alternativeA);\r\n        return (error = true);\r\n      }\r\n\r\n      if (alternativeB.value.length < 1) {\r\n        const optWithValue = opt.filter((al) => al.value.length >= 1);\r\n        if (optWithValue.length > 0) {\r\n          alternativeB.value = optWithValue[0].value;\r\n          alternativeC.value = alternativeD.value ? alternativeD.value : '';\r\n          alternativeD.value = alternativeE.value ? alternativeE.value : '';\r\n          alternativeE.value = '';\r\n        } else {\r\n          toaster.danger(alternativeB.dataset.message);\r\n          anim.shake(alternativeB);\r\n          return (error = true);\r\n        }\r\n      }\r\n      const payload = new FormData();\r\n      payload.set('quest', questTitle.value);\r\n      if (questImageBlob) payload.set('image', questImageBlob);\r\n      payload.set('a', alternativeA.value ? alternativeA.value : '');\r\n      payload.set('b', alternativeB.value ? alternativeB.value : '');\r\n      payload.set('c', alternativeC.value ? alternativeC.value : '');\r\n      payload.set('d', alternativeD.value ? alternativeD.value : '');\r\n      payload.set('e', alternativeE.value ? alternativeE.value : '');\r\n      const response = await fetch(`/api/quiz/${quizSlug}/quest`, {\r\n        body: payload,\r\n        credentials: 'include',\r\n        method: 'POST',\r\n      });\r\n      if (response.status === 403) {\r\n        error = true;\r\n        return forbidden();\r\n      }\r\n      if (!response.ok) {\r\n        const json = (await response.json()) as ExceptionDto;\r\n        toaster.danger(json.message);\r\n        error = true;\r\n      } else {\r\n        toaster.info(formAddQuest.dataset.success);\r\n        const json = (await response.json()) as QuestDto;\r\n        appendQuestPreviewAt(json, questPreview.querySelector('.items')!);\r\n        setTimeout(() => hideAddQuestModal[0].click(), 500);\r\n      }\r\n    } catch (e) {\r\n      error = true;\r\n      console.log(error);\r\n    } finally {\r\n      progress.hide();\r\n      if (!error) resetAddNewQuestForm();\r\n    }\r\n  });\r\n\r\n  const previews = document.querySelectorAll<HTMLElement>('.preview-item')!;\r\n  const confirmDeleteMessage = questPreview.dataset.delete ?? '';\r\n  const deletedSuccessMessage = questPreview.dataset.deleteSuccess ?? '';\r\n  previews.forEach((item) => {\r\n    const id = Number(item.dataset.id);\r\n    const quest = quests.find((q) => q.id === id);\r\n    if (!quest) return console.log('Quest error: ' + id);\r\n    item.addEventListener('click', ({ target }) =>\r\n      onPreviewItemClick(quest, target as HTMLElement),\r\n    );\r\n    const deleteButton = item.querySelector<HTMLButtonElement>('button.delete')!;\r\n    deleteButton.onclick = () => onDelete(deleteButton, quest);\r\n  });\r\n\r\n  async function onDelete(element: HTMLElement, quest: QuestDto) {\r\n    const parent = element.parentElement!.parentElement!;\r\n    if (element.dataset.clicked !== 'true') {\r\n      element.dataset.clicked = 'true';\r\n      anim.shake(parent);\r\n      const icon = element.querySelector('i')!;\r\n      icon.style.color = 'var(--alert)';\r\n      toaster.alert(normalizeDeleteMessage(confirmDeleteMessage, quest));\r\n      setTimeout(() => {\r\n        element.dataset.clicked = 'false';\r\n        icon.style.color = 'var(--danger-light)';\r\n      }, 5000);\r\n      return;\r\n    }\r\n    toaster.hide();\r\n    progress.show();\r\n    const { response, json } = await rest.DELETE('/api/quiz/quest/' + quest.id);\r\n    if (response.status === 403) {\r\n      return forbidden();\r\n    }\r\n    if (response.ok) {\r\n      toaster.success(deletedSuccessMessage);\r\n      quests = quests.filter((q) => q.id != quest.id);\r\n      anim.scaleOut(parent, () => {\r\n        parent.remove();\r\n        updateQuestPreview(questPreview.querySelector('.items')!);\r\n      });\r\n    } else {\r\n      toaster.danger(json!.message);\r\n      anim.shake(parent);\r\n    }\r\n    progress.hide();\r\n  }\r\n\r\n  function normalizeDeleteMessage(message: string, quest: QuestDto) {\r\n    return message.replace('#', quest.quest);\r\n  }\r\n\r\n  function appendQuestPreviewAt(quest: QuestDto, at: HTMLElement) {\r\n    quests.push(quest);\r\n    updateQuestPreview(at);\r\n  }\r\n\r\n  function updateQuestPreview(at: HTMLElement) {\r\n    at.innerHTML = '';\r\n    quests.forEach((q, i) => {\r\n      at.appendChild(\r\n        generateHTML<HTMLDivElement>({\r\n          htmlType: 'div',\r\n          attributes: [{ key: 'class', value: 'preview-item' }],\r\n          onClick: (t) => onPreviewItemClick(q, t),\r\n          children: [\r\n            {\r\n              htmlType: 'span',\r\n              value: (i + 1).toString(),\r\n            },\r\n            {\r\n              htmlType: 'span',\r\n              value: q.quest,\r\n              attributes: [\r\n                { key: 'class', value: 'quest-title' },\r\n                { key: 'style', value: 'color: var(--title);' },\r\n              ],\r\n            },\r\n            {\r\n              htmlType: 'div',\r\n              attributes: [{ key: 'class', value: 'buttons' }],\r\n              children: [\r\n                {\r\n                  htmlType: 'button',\r\n                  onClick: () => {},\r\n                  children: [\r\n                    { htmlType: 'i', attributes: [{ key: 'class', value: 'bi bi-pencil-square' }] },\r\n                  ],\r\n                  attributes: [\r\n                    { key: 'type', value: 'button' },\r\n                    { key: 'class', value: 'quest-edit' },\r\n                    { key: 'data-id', value: q.id.toString() },\r\n                  ],\r\n                },\r\n                {\r\n                  htmlType: 'button',\r\n                  onClick: (target) => onDelete(target, q),\r\n                  children: [\r\n                    {\r\n                      htmlType: 'i',\r\n                      attributes: [\r\n                        { key: 'class', value: 'bi bi-trash3' },\r\n                        {\r\n                          key: 'style',\r\n                          value: 'color: var(--danger-light)',\r\n                        },\r\n                      ],\r\n                    },\r\n                  ],\r\n                  attributes: [\r\n                    { key: 'type', value: 'button' },\r\n                    { key: 'class', value: 'delete' },\r\n                    { key: 'data-id', value: q.id.toString() },\r\n                  ],\r\n                },\r\n              ],\r\n            },\r\n          ],\r\n        }),\r\n      );\r\n    });\r\n\r\n    const alert = document.getElementById('preview-small-quest-alert')!;\r\n    const noQuizAlert = document.getElementById('no-quest-alert');\r\n    if (quests.length < 1) {\r\n      noQuizAlert?.classList.remove('dn');\r\n    } else noQuizAlert?.classList.add('dn');\r\n    if (quests.length >= 5) {\r\n      alert.classList.add('dn');\r\n      return;\r\n    }\r\n    alert.classList.remove('dn');\r\n    alert.scrollIntoView();\r\n    setTimeout(() => anim.shake(alert), 500);\r\n  }\r\n\r\n  function onPreviewItemClick(q: QuestDto, target: HTMLElement): void {\r\n    if (\r\n      target.nodeName.toLocaleLowerCase() === 'i' &&\r\n      target.parentElement?.classList.contains('delete')\r\n    ) {\r\n      return;\r\n    }\r\n    resetAddNewQuestForm();\r\n    alternativeA.value = q.a;\r\n    alternativeB.value = q.b;\r\n    alternativeC.value = q.c;\r\n    alternativeD.value = q.d;\r\n    alternativeE.value = q.e;\r\n\r\n    questTitle.value = q.quest;\r\n    questImagePreview.src = q.imageURL.startsWith('https://')\r\n      ? q.imageURL\r\n      : questImagePreview.dataset.defaultSrc!;\r\n    formAddQuest.dataset.updateQuest = 'true';\r\n    addQuestButton.click();\r\n  }\r\n}\r\n", "import { runAuthenticationManager } from './manager/authenticationManager';\r\nimport { runProfileManager } from './manager/profileManager';\r\nimport { quizCreationManager } from './manager/quizCreationManager';\r\nimport { quizEditManager } from './manager/quizEditManager';\r\n\r\n(() => {\r\n  console.log('This app is written in TypeScript');\r\n  const managerID = document.getElementById('www-manager-id') as HTMLInputElement;\r\n  if (!managerID) {\r\n    return console.error('Manager ID is not defined');\r\n  }\r\n  switch (managerID.value) {\r\n    case 'session':\r\n      runAuthenticationManager(document.getElementById('session') as HTMLFormElement);\r\n      break;\r\n    case 'profile':\r\n      runProfileManager();\r\n      break;\r\n    case 'quiz-create':\r\n      quizCreationManager(document.getElementById('form-n-quiz') as HTMLFormElement);\r\n      break;\r\n    case 'quiz-edit':\r\n      quizEditManager(document.getElementById('form-e-quiz') as HTMLFormElement);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n})();\r\n"],
  "mappings": "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",
  "names": ["JsonRestApi", "_JsonRestApi", "_0", "__async", "path", "headers", "response", "_1", "body", "json", "method", "f", "UserValidation", "email", "password", "name", "username", "AnimationTool", "_AnimationTool", "element", "onComplete", "getFocus", "timer", "generate", "htmlType", "attributes", "value", "onClick", "children", "html", "attr", "child", "c", "generateHTML", "ScreenProgressTool", "_ScreenProgressTool", "generateHTML", "ToasterTool", "_ToasterTool", "anim", "generateHTML", "timer", "backdrop", "color", "icon", "_a", "_b", "_c", "__async", "r", "e", "error", "func", "message", "timerInMilliseconds", "AnimationTool", "anim", "AnimationTool", "toaster", "ToasterTool", "progress", "ScreenProgressTool", "rest", "JsonRestApi", "runAuthenticationManager", "form", "_a", "path", "genericError", "successMessage", "validation", "UserValidation", "emailInput", "emailMessage", "passwordInput", "passwordMessage", "submitButton", "signUpButton", "submit", "e", "sendAuthenticationRequest", "__async", "payload", "json", "error", "ImageTool", "_ImageTool", "file", "width", "height", "resize", "resolve", "url", "img", "__async", "w", "h", "ctx", "nImage", "b", "error", "quality", "context", "image", "imageTool", "ImageTool", "toaster", "ToasterTool", "anim", "AnimationTool", "progress", "ScreenProgressTool", "rest", "JsonRestApi", "validation", "UserValidation", "editProfileManager", "form", "userEmail", "main", "header", "avatarInput", "avatarImg", "headerAvatarImg", "avatarMessage", "spanUserName", "modal", "modalCancel", "modalConfirm", "lastAvatarURL", "__async", "avatar", "payload", "res", "json", "error", "passwordInput", "password", "isPasswordValid", "nameInput", "name", "isNameValid", "emailInput", "defaultEmail", "email", "isEmailValid", "usernameInput", "usernameAlreadyInUse", "username", "isUsernameValid", "e", "status", "updateProfile", "includeCredentials", "updatePasswordManager", "button", "cancel", "onConfirmInput", "confirmNewPassword", "confirmNewPasswordInput", "isNewPasswordValid", "newPassword", "newPasswordInput", "runProfileManager", "editProfile", "QuizValidation", "title", "keywords", "k", "progress", "ScreenProgressTool", "imageTool", "ImageTool", "validation", "QuizValidation", "anim", "AnimationTool", "toaster", "ToasterTool", "quizCreationManager", "form", "addImage", "imageInput", "image", "imageSrc", "blob", "__async", "imgBlob", "error", "titleInput", "title", "isTitleValid", "descriptionInput", "displayDescriptionLen", "description", "keywordInput", "keywordsPreview", "keywords", "key", "preview", "submit", "payload", "result", "json", "e", "forbidden", "ToasterTool", "ScreenProgressTool", "progress", "ScreenProgressTool", "imageTool", "ImageTool", "validation", "QuizValidation", "anim", "AnimationTool", "toaster", "ToasterTool", "rest", "JsonRestApi", "quests", "quizEditManager", "form", "imageInput", "image", "imageSrc", "blob", "__async", "imgBlob", "error", "titleInput", "title", "isTitleValid", "descriptionInput", "displayDescriptionLen", "description", "keywordInput", "keywordsPreview", "keywords", "showKeywords", "key", "preview", "submit", "payload", "result", "forbidden", "json", "e", "formAddNewQuestManager", "_a", "_b", "questPreview", "quizSlug", "addQuestButton", "questModal", "formAddQuest", "hideAddQuestModal", "questImagePreview", "questImageInput", "questTitle", "alternativeA", "alternativeB", "alternativeC", "alternativeD", "alternativeE", "questImageSrc", "questImageBlob", "target", "resetAddNewQuestForm", "button", "a", "normalizeQuestTitle", "opt", "optWithValue", "al", "response", "appendQuestPreviewAt", "previews", "confirmDeleteMessage", "deletedSuccessMessage", "item", "id", "quest", "q", "onPreviewItemClick", "deleteButton", "onDelete", "element", "parent", "icon", "normalizeDeleteMessage", "updateQuestPreview", "message", "at", "i", "generateHTML", "t", "alert", "noQuizAlert", "managerID", "runAuthenticationManager", "runProfileManager", "quizCreationManager", "quizEditManager"]
}
